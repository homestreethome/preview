/**
 * audiowalk
 * @version v0.1.0 - 2014-09-01
 * @link https://github.com/lennart/audiowalk
 * @author Lennart Melzer ()
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
$(document).ready(function(){console.log("this is home.js calling"),window.viewportUnitsBuggyfill.init();var o=function(){return $(window).width()>1200?14:13},t=o();$(".place").click(function(o){$(o.currentTarget).toggleClass("col-lg-2").toggleClass("col-lg-5"),$(o.currentTarget).toggleClass("col-md-2").toggleClass("col-md-6"),$(o.currentTarget).toggleClass("col-sm-3").toggleClass("col-sm-9"),$(o.currentTarget).toggleClass("col-xs-4").toggleClass("col-xs-12")});var l=L.map("map",{minZoom:13,maxZoom:17,fullscreenControl:!0,zoom:t}).setView([52.2571198321276,10.5145982516365],t);$(window).resize(function(){13==t&&14==o()&&(l.setView([52.2571198321276,10.5145982516365],o()),l.maxZoom(14))}),l.locate({watch:!0}),L.tileLayer("maps/default/tiles/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(l);var e=L.geoJson(null,{style:function(o){return"LineString"===o.geometry.type?(console.log("[map] styling",o),{color:"#168",opacity:1,dashArray:"10,10"}):{}},pointToLayer:function(o,t){console.log("marker",t);var l=L.circleMarker(t,{color:"#49fb35",opacity:.8,fillOpacity:.8,fillColor:"#b8ffb1",className:"bnw-marker",dashArray:null}).setRadius(7);return l.bindLabel(o.properties.name,{noHide:!1,direction:"verticalauto",offset:L.point(0,0),className:"bnw-marker-label"})}}),a=function(o,t,l,e){var a=t.lng-o.lng,n=t.lat-o.lat,r=Math.sqrt(Math.pow(a,2)+Math.pow(n,2)),s=l*r,g=e*r;return{sw:{lng:o.lng-g,lat:o.lat-s},ne:{lng:t.lng+g,lat:t.lat+s}}},n="/maps/home.gpx",r=omnivore.gpx(n,null,e).on("ready",function(){console.log("labelled route");var o=r.getBounds(),t=a(o.getSouthWest(),o.getNorthEast(),.4,1.5),e=L.latLngBounds(L.latLng(t.sw),L.latLng(t.ne));console.log("[map] padded bounds",e),l.setMaxBounds(e)}).addTo(l)});