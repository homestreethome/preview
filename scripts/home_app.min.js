/**
 * audiowalk
 * @version v0.1.0 - 2014-09-01
 * @link https://github.com/lennart/audiowalk
 * @author Lennart Melzer ()
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
$(document).ready(function(){console.log("this is home.js calling"),window.viewportUnitsBuggyfill.init();var e=function(){return $(window).width()>1200?14:13},l=e(),o=$(".places");$(".place").click(function(e){$(e.currentTarget).toggleClass("place-small").toggleClass("place-large"),$(e.currentTarget).siblings(".place-large").toggleClass("place-large"),o.masonry({columnWidth:".place-small",itemSelector:".place"})}),o.masonry({columnWidth:".place",itemSelector:".place"});var a=L.map("map",{minZoom:13,maxZoom:17,fullscreenControl:!0,zoom:l}).setView([52.2571198321276,10.5145982516365],l);$(window).resize(function(){13==l&&14==e()&&(a.setView([52.2571198321276,10.5145982516365],e()),a.maxZoom(14))}),a.locate({watch:!0}),L.tileLayer("maps/default/tiles/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(a);var t=L.geoJson(null,{style:function(e){return"LineString"===e.geometry.type?(console.log("[map] styling",e),{color:"#168",opacity:1,dashArray:"10,10"}):{}},pointToLayer:function(e,l){console.log("marker",l);var o=L.circleMarker(l,{color:"#49fb35",opacity:.8,fillOpacity:.8,fillColor:"#b8ffb1",className:"bnw-marker",dashArray:null}).setRadius(7);return o.bindLabel(e.properties.name,{noHide:!1,direction:"verticalauto",offset:L.point(0,0),className:"bnw-marker-label"})}}),n=function(e,l,o,a){var t=l.lng-e.lng,n=l.lat-e.lat,r=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),i=o*r,s=a*r;return{sw:{lng:e.lng-s,lat:e.lat-i},ne:{lng:l.lng+s,lat:l.lat+i}}},r="maps/home.gpx",i=omnivore.gpx(r,null,t).on("ready",function(){console.log("labelled route");var e=i.getBounds(),l=n(e.getSouthWest(),e.getNorthEast(),.4,1.5),o=L.latLngBounds(L.latLng(l.sw),L.latLng(l.ne));console.log("[map] padded bounds",o),a.setMaxBounds(o)}).addTo(a)});