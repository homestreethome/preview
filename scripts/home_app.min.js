/**
 * audiowalk
 * @version v0.1.0 - 2014-09-05
 * @link https://github.com/lennart/audiowalk
 * @author Lennart Melzer ()
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
$(document).ready(function(){console.log("this is home.js calling"),window.viewportUnitsBuggyfill.init();var l=function(){return $(window).width()>1200?14:13},a=l(),e=$(".places");$(".place").click(function(l){$(l.currentTarget).toggleClass("place-small").toggleClass("place-large"),$(l.currentTarget).siblings(".place-large").toggleClass("place-large"),o()});var o=function(){e.masonry({columnWidth:".place-small",itemSelector:".place"})};setTimeout(function(){o()},500),o();var t=L.map("map",{minZoom:13,maxZoom:17,fullscreenControl:!0,zoom:a,scrollWheelZoom:!1}).setView([52.2571198321276,10.5145982516365],a);$(window).resize(function(){13==a&&14==l()&&(t.setView([52.2571198321276,10.5145982516365],l()),t.maxZoom(14))}),t.locate({watch:!0}),L.tileLayer("maps/default/tiles/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(t);var i=L.geoJson(null,{style:function(l){return"LineString"===l.geometry.type?(console.log("[map] styling",l),{color:"#168",opacity:1,dashArray:"10,10"}):{}},pointToLayer:function(l,a){console.log("marker",a);var e=L.circleMarker(a,{color:"white",opacity:.8,fillOpacity:.8,fillColor:"red",className:"bnw-marker",dashArray:null}).setRadius(7).bindPopup('<img src="images/2.jpg" style="width: 100%">Easily customizable. Easily customizable. Easily customizable. Easily customizable. Easily customizable.<br> Easily customizable. Easily customizable. Easily customizable. Easily customizable. Easily customizable.<br> Easily customizable. Easily customizable. Easily customizable. Easily customizable. Easily customizable.',{maxWidth:1600});return e.bindLabel(l.properties.name,{noHide:!1,direction:"verticalauto",offset:L.point(0,0),className:"bnw-marker-label"})}}),s=function(l,a,e,o){var t=a.lng-l.lng,i=a.lat-l.lat,s=Math.sqrt(Math.pow(t,2)+Math.pow(i,2)),n=e*s,r=o*s;return{sw:{lng:l.lng-r,lat:l.lat-n},ne:{lng:a.lng+r,lat:a.lat+n}}},n="maps/home.gpx",r=omnivore.gpx(n,null,i).on("ready",function(){console.log("labelled route");var l=r.getBounds(),a=s(l.getSouthWest(),l.getNorthEast(),.4,1.5),e=L.latLngBounds(L.latLng(a.sw),L.latLng(a.ne));console.log("[map] padded bounds",e),t.setMaxBounds(e)}).addTo(t)});